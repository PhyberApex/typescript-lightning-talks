const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/shiki-CBGY_9eR.js","assets/monaco/bundled-types-C1FMKo2q.js","assets/modules/shiki-BebAPaQI.js","assets/modules/vue-6H69zlv8.js","assets/modules/shiki-DVQfPmV_.css","assets/modules/file-saver-C8QSpN-3.js","assets/monaco/bundled-types-C_ieaJtT.css"])))=>i.map(i=>d[i]);
import{r as x,d as M,O as L,f as c,o,z as I,H as P,X as D,aL as H,_ as z,N as J,ao as F,as as U,i as R,au as W,g as A,t as E,a1 as y,F as b,ak as T,b as X,n as q,P as K,k as Y,e as G,w as Q}from"../modules/vue-6H69zlv8.js";import{Y as Z,a as ee,W as te,X as $}from"../monaco/bundled-types-C1FMKo2q.js";import{u as ne,w as se}from"../index-y1isCsDx.js";import{u as re}from"./context-CUpXkUBw.js";import{_ as N}from"../modules/shiki-BebAPaQI.js";import{_ as ie}from"./IconButton.vue_vue_type_script_setup_true_lang-JK5XHqMv.js";import"../modules/file-saver-C8QSpN-3.js";const B={},oe=[],ae=Z(async()=>{const a={javascript:O,js:O,typescript:O,ts:O},{defaultHighlightOptions:n,getEagerHighlighter:s}=await(await N(async()=>{const{default:r}=await import("../shiki-CBGY_9eR.js");return{default:r}},__vite__mapDeps([0,1,2,3,4,5,6]))).default(),m=await s(),u=(r,l,e)=>m.codeToHtml(r,{...n,lang:l,...e}),f=async(r,l,e)=>{try{const t=a[l];if(!t)throw new Error(`Runner for language "${l}" not found`);return await t(r,{options:e,highlight:u,run:async(i,d)=>await f(i,d,e)})}catch(t){return console.error(t),{error:`${t}`}}};for(const r of oe){const l=await r(a);Object.assign(a,l)}return{highlight:u,run:f}});function le(a){const n=x([]),s=e=>n.value.push({error:String(e)}),m=(...e)=>n.value.push(e.map(f)),u=Object.assign({},console);u.info=u.log=u.debug=u.warn=u.error=m,u.clear=()=>n.value.length=0;try{const e=`return async (console, __slidev_import, __slidev_on_error) => {
    ${ee.monacoRunUseStrict?'"use strict";':""}
      try {
        ${l(a)}
      } catch (e) {
        __slidev_on_error(e)
      }
    }`;new Function(e)()(u,t=>{const i=B[t];if(!i)throw new Error(`Module not found: ${t}.
Available modules: ${Object.keys(B).join(", ")}. Please refer to https://sli.dev/custom/config-code-runners#additional-runner-dependencies`);return i},s)}catch(e){s(e)}function f(e){return typeof e=="string"?{text:e}:{text:r(e),highlightLang:"javascript"}}function r(e){let t="";if(e instanceof Error)t=`Error: ${JSON.stringify(e.message)}`;else if(e==null||typeof e=="symbol")t=String(e);else if(Array.isArray(e))t=`[${e.map(r).join(", ")}]`;else if(e instanceof Set){const i=[...e];t=`Set (${e.size}) {${i.map(r).join(", ")}}`}else if(e instanceof Map){const i=[...e.entries()];t=`Map (${e.size}) {${i.map(([d,_])=>`${r(d)} => ${r(_)}`).join(", ")}}`}else if(e instanceof RegExp)t=e.toString();else if(typeof e=="string")t=JSON.stringify(e);else if(typeof e=="object"){const i=e.constructor?.name??"",d=i&&i==="Object"?"":i;t=(d?`${d}: `:"")+JSON.stringify(e,(v,g)=>g===void 0?"__undefined__":g,2).replace(/"__undefined__"/g,"undefined"),t=String(t)}else t=String(e);return t}function l(e){return e=e.replace('import "reflect-metadata"',"").replace('require("reflect-metadata")',""),e=e.replace("export {};",""),e}return n}let k;async function O(a){k??=await N(()=>import("../monaco/bundled-types-C1FMKo2q.js").then(s=>s.t),__vite__mapDeps([1,2,3,4,5,6])),a=k.transpileModule(a,{compilerOptions:{module:k.ModuleKind.ESNext,target:k.ScriptTarget.ES2022},transformers:{after:[ce]}}).outputText;const n=/import\s*\((.+)\)/g;return a=a.replace(n,(s,m)=>`__slidev_import(${m})`),le(a)}function ce(a){const{factory:n}=a,{isImportDeclaration:s,isNamedImports:m,NodeFlags:u}=k;return f=>{const r=[...f.statements];for(let l=0;l<r.length;l++){const e=r[l];if(!s(e))continue;let t;const i=e.importClause?.namedBindings,d=[];if(e.importClause?.name&&d.push(n.createBindingElement(void 0,n.createIdentifier("default"),e.importClause.name)),i)if(m(i)){for(const v of i.elements)d.push(n.createBindingElement(void 0,v.propertyName,v.name));t=n.createObjectBindingPattern(d)}else t=n.createIdentifier(i.name.text);else t=n.createObjectBindingPattern(d);const _=n.createVariableStatement(void 0,n.createVariableDeclarationList([n.createVariableDeclaration(t,void 0,void 0,n.createAwaitExpression(n.createCallExpression(n.createIdentifier("import"),void 0,[e.moduleSpecifier])))],u.Const));r[l]=_}return n.updateSourceFile(f,r)}}const ue=M({__name:"DomElement",props:{element:{}},setup(a){const n=a,s=x();return L(()=>{s.value&&s.value.appendChild(n.element)}),(m,u)=>(o(),c("div",{ref_key:"container",ref:s},null,512))}}),de={key:0,class:"text-sm text-center opacity-50"},fe={key:1,class:"text-sm text-center opacity-50"},me={key:2,class:"text-sm text-center opacity-50"},pe=["innerHTML"],he={key:1,class:"text-red-500"},_e={key:3,class:"output-line"},ve=["innerHTML"],ge={key:2,class:"separator"},ye={key:0,class:"absolute right-1 top-1 max-h-full flex gap-1"},Ee=M({__name:"CodeRunner",props:{modelValue:{},lang:{},autorun:{type:[Boolean,String]},height:{},showOutputAt:{type:[null,Boolean,String,Number,Array]},highlightOutput:{type:Boolean},runnerOptions:{}},emits:["update:modelValue"],setup(a,{emit:n}){const s=a,m=n,{isPrintMode:u}=ne(),f=F(s,"modelValue",m),{$renderContext:r,$clicksContext:l}=re(),e=I(()=>!["slide","presenter"].includes(r.value)),t=u.value?"once":s.autorun,i=x(t),d=P(),_=x(0),v=x(),g=x(s.showOutputAt);if(s.showOutputAt){const w=se();D(()=>{const h=l.calculate(s.showOutputAt);h?(l.register(w,h),H(()=>{g.value=!h.isActive.value})):g.value=!1}),z(()=>l.unregister(w))}const C=te(200,async()=>{if(e.value)return;const{highlight:w,run:h}=await ae();v.value=w;const p=setTimeout(()=>{i.value=!0},500);d.value=await h(f.value,s.lang,s.runnerOptions??{}),_.value+=1,i.value=!1,clearTimeout(p)});return t==="once"?C():t&&J(f,C,{immediate:!0}),(w,h)=>(o(),c(b,null,[U(A("div",{class:"relative flex flex-col rounded-b border-t border-main",style:Y({height:s.height}),"data-waitfor":".slidev-runner-output"},[e.value?(o(),c("div",de,' Code is disabled in the "'+E(y(r))+'" mode ',1)):i.value?(o(),c("div",fe," Running... ")):d.value?(o(),c("div",{key:`run-${_.value}`,class:"slidev-runner-output"},[(o(!0),c(b,null,T(y($)(K(d.value)),(p,V)=>(o(),c(b,{key:V},["html"in p?(o(),c("div",{key:0,innerHTML:p.html},null,8,pe)):"error"in p?(o(),c("div",he,E(p.error),1)):"element"in p?(o(),X(ue,{key:2,element:p.element},null,8,["element"])):(o(),c("div",_e,[(o(!0),c(b,null,T(y($)(p),(S,j)=>(o(),c(b,{key:j},[S.highlightLang&&v.value?(o(),c("span",{key:0,class:"highlighted",innerHTML:v.value(S.text,S.highlightLang)},null,8,ve)):(o(),c("span",{key:1,class:q(S.class)},E(S.text),3)),j<y($)(p).length-1?(o(),c("span",ge,",")):R("v-if",!0)],64))),128))]))],64))),128))])):(o(),c("div",me," Click the play button to run the code "))],4),[[W,!g.value]]),y(f).trim()?(o(),c("div",ye,[G(ie,{class:"w-8 h-8 max-h-full flex justify-center items-center",title:"Run code",onClick:y(C)},{default:Q(()=>[...h[0]||(h[0]=[A("div",{class:"i-carbon:play"},null,-1)])]),_:1},8,["onClick"])])):R("v-if",!0)],64))}});export{Ee as default};
