import{_ as h,$ as s}from"./bundled-types-CaL_r580.js";import{C as c,H as u,D as p,a as m,R as f,b as _,c as w,d as k,F as v,e as D,S as P,f as R,g as I}from"./lspLanguageFeatures-BBMh9ZJB.js";import{h as U,i as T,j as x,t as j,k as M}from"./lspLanguageFeatures-BBMh9ZJB.js";import"../modules/shiki-BJyiYhAR.js";import"../modules/vue-BOTxWmFH.js";import"../modules/file-saver-C8QSpN-3.js";const C=120*1e3;class A{constructor(o){this._defaults=o,this._worker=null,this._client=null,this._idleCheckInterval=window.setInterval(()=>this._checkIfIdle(),30*1e3),this._lastUsedTime=0,this._configChangeListener=this._defaults.onDidChange(()=>this._stopWorker())}_stopWorker(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null}dispose(){clearInterval(this._idleCheckInterval),this._configChangeListener.dispose(),this._stopWorker()}_checkIfIdle(){if(!this._worker)return;Date.now()-this._lastUsedTime>C&&this._stopWorker()}_getClient(){return this._lastUsedTime=Date.now(),this._client||(this._worker=h({moduleId:"vs/language/css/cssWorker",createWorker:()=>new Worker(new URL("/typescript-lightning-talks/10-discriminated-unions/assets/css.worker-DBVD8oXr.js",import.meta.url),{type:"module"}),label:this._defaults.languageId,createData:{options:this._defaults.options,languageId:this._defaults.languageId}}),this._client=this._worker.getProxy()),this._client}getLanguageServiceWorker(...o){let e;return this._getClient().then(a=>{e=a}).then(a=>{if(this._worker)return this._worker.withSyncedResources(o)}).then(a=>e)}}function b(n){const o=[],e=[],a=new A(n);o.push(a);const i=(...t)=>a.getLanguageServiceWorker(...t);function l(){const{languageId:t,modeConfiguration:r}=n;g(e),r.completionItems&&e.push(s.registerCompletionItemProvider(t,new c(i,["/","-",":"]))),r.hovers&&e.push(s.registerHoverProvider(t,new u(i))),r.documentHighlights&&e.push(s.registerDocumentHighlightProvider(t,new p(i))),r.definitions&&e.push(s.registerDefinitionProvider(t,new m(i))),r.references&&e.push(s.registerReferenceProvider(t,new f(i))),r.documentSymbols&&e.push(s.registerDocumentSymbolProvider(t,new _(i))),r.rename&&e.push(s.registerRenameProvider(t,new w(i))),r.colors&&e.push(s.registerColorProvider(t,new k(i))),r.foldingRanges&&e.push(s.registerFoldingRangeProvider(t,new v(i))),r.diagnostics&&e.push(new D(t,i,n.onDidChange)),r.selectionRanges&&e.push(s.registerSelectionRangeProvider(t,new P(i))),r.documentFormattingEdits&&e.push(s.registerDocumentFormattingEditProvider(t,new R(i))),r.documentRangeFormattingEdits&&e.push(s.registerDocumentRangeFormattingEditProvider(t,new I(i)))}return l(),o.push(d(e)),d(o)}function d(n){return{dispose:()=>g(n)}}function g(n){for(;n.length;)n.pop().dispose()}export{c as CompletionAdapter,m as DefinitionAdapter,D as DiagnosticsAdapter,k as DocumentColorAdapter,R as DocumentFormattingEditProvider,p as DocumentHighlightAdapter,U as DocumentLinkAdapter,I as DocumentRangeFormattingEditProvider,_ as DocumentSymbolAdapter,v as FoldingRangeAdapter,u as HoverAdapter,f as ReferenceAdapter,w as RenameAdapter,P as SelectionRangeAdapter,A as WorkerManager,T as fromPosition,x as fromRange,b as setupMode,j as toRange,M as toTextEdit};
